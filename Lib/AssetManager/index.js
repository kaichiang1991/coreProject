!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var i in n)("object"==typeof exports?exports:e)[i]=n[i]}}(self,(function(){return(()=>{"use strict";var e={134:function(e,t,n){var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},s=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&s(t,e,n);return a(t,e),t},c=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((i=i.apply(e,t||[])).next())}))},l=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},p=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e},f=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.eButtonState=t.PixiAsset=t.eAssetType=void 0;var d=u(n(295));window.PIXI=d;var h=n(799),m=f(n(15));window.gsap=m.default;var y,v,g,x,b=n(37);!function(e){e[e.img=0]="img",e[e.spriteSheet=1]="spriteSheet",e[e.spine=2]="spine",e[e.font=3]="font"}(y=t.eAssetType||(t.eAssetType={})),g=t.PixiAsset||(t.PixiAsset={}),x=function(){function e(){}return e.init=function(e){console.log("%c"+b.name+" 版號: "+b.version,"color:green; background-color:cyan; font-size:16px; padding:2px;"),this.loader=e.loader,this.renderer=e.renderer},e.loadAsset=function(e){return c(this,void 0,void 0,(function(){var t,n=this;return l(this,(function(i){switch(i.label){case 0:return t=new Array,Array.isArray(e)||(e=[e]),e.map((function(e){var i=e.name,r=e.source;n.loader.resources[i]?console.log('%cloadAsset "'+i+'" exist.',"color: yellow"):n.checkLoadArg(e)?n.loader.add(i,r).onComplete.add((function(){return t.push(n.parseAsset(e))})):console.log("checkLoadArg","fail",e)})),[4,Promise.all(p([new Promise((function(e){return n.loader.load((function(){return e()}))}))],t))];case 1:return i.sent(),[2]}}))}))},e.getAsset=function(e){var t;return(null===(t=this.loader)||void 0===t?void 0:t.resources[e])||console.log("%cgetAsset fail. "+e,"color: yellow"),this.loader.resources[e]},e.getTexture=function(e){return d.utils.TextureCache[e]||console.log("%cgetTexture fail. "+e,"color: yellow"),d.utils.TextureCache[e]},e.parseAsset=function(e){return c(this,void 0,void 0,(function(){var t,n,i,r=this;return l(this,(function(o){switch(t=e.type,n=e.name,i=e.source,t){case y.img:this.renderer.plugins.prepare.upload(this.getTexture(n));break;case y.spriteSheet:this.renderer.plugins.prepare.upload(this.getTexture(n+"_image"));break;case y.spine:Object.keys(this.loader.resources).map((function(e){new RegExp(n+"_atlas_").test(e)&&r.renderer.plugins.prepare.add(r.getTexture(e))})),this.renderer.plugins.prepare.upload();break;case y.font:this.renderer.plugins.prepare.add(this.getTexture(i.replace(/\.fnt/,"_0.png"))),this.renderer.plugins.prepare.upload()}return[2]}))}))},e.checkLoadArg=function(e){var t=!0,n=e.type,i=e.name;switch(n){case y.img:case y.spriteSheet:case y.spine:t=!!i}return t},e}(),g.AssetLoader=x,function(e){var t=function(){function e(){}return e.getJson=function(e){return c(this,void 0,void 0,(function(){return l(this,(function(t){return[2,new Promise((function(t){var n=e.match(/\/([\w-]*)(\.json)/)[1];d.Loader.shared.add(n,e).load((function(e,i){t(i[n].data)}))}))]}))}))},e}();e.JSON=t}(t.PixiAsset||(t.PixiAsset={})),function(e){var t=function(t){function n(n){return t.call(this,e.AssetLoader.getTexture(n))||this}return r(n,t),n}(d.Sprite);e.Sprite=t;var n=function(t){function n(e,n){return void 0===n&&(n=!0),"string"==typeof e[0]&&(e=e.map((function(e){return d.Texture.from(e)}))),t.call(this,e,n)||this}return r(n,t),n.init=function(t){return c(this,void 0,void 0,(function(){var n,i,r=this;return l(this,(function(o){switch(o.label){case 0:return n=y.spriteSheet,i=Object.keys(t),[4,e.AssetLoader.loadAsset(i.map((function(e){return{type:n,name:t[e].name,source:t[e].source}})))];case 1:return o.sent(),i.map((function(n){var i;r.animSpriteMap[n]="string"==typeof t[n].animName?null===(i=e.AssetLoader.getAsset(t[n].name).spritesheet)||void 0===i?void 0:i.animations[t[n].animName]:t[n].animName.map((function(e){return d.Texture.from(e)}))})),[2]}}))}))},n.playAnimation=function(e,t){if(!this.animSpriteMap[e])return console.log('%cplayAnimation "'+e+'" not exist.',"color:yellow"),null;var i=new n(this.animSpriteMap[e]);if(t){var r=t.animSpeed,o=t.loop,s=t.autoPlay;i.animationSpeed=r||i.animationSpeed,i.loop=null==o||o,s&&i.play()}return i},n.animSpriteMap={},n}(d.AnimatedSprite);e.AnimatedSprite=n}(t.PixiAsset||(t.PixiAsset={})),function(e){var t=function(t){function n(n){return t.call(this,e.AssetLoader.getAsset(n).spineData)||this}return r(n,t),n.init=function(t){return c(this,void 0,void 0,(function(){var n,i;return l(this,(function(r){switch(r.label){case 0:return n=Object.keys(t),i=y.spine,[4,e.AssetLoader.loadAsset(n.map((function(e){return{name:e,type:i,source:t[e]}})))];case 1:return r.sent(),[2]}}))}))},n.playSpine=function(e,t,i){void 0===i&&(i=!1);var r=new n(e);return[r,t?r.state.setAnimation(0,t,i):null]},n.prototype.setAnimation=function(e,t){return void 0===t&&(t=!1),this.setAnimationWithIndex(0,e,t)},n.prototype.setAnimationWithLatestIndex=function(e,t){return void 0===t&&(t=!1),this.setAnimationWithIndex(this.getLatestTrackIndex(),e,t)},n.prototype.setAnimationWithIndex=function(e,t,n){return void 0===n&&(n=!1),this.state.setAnimation(e,t,n)},n.prototype.addAnimation=function(e,t,n,i){return void 0===t&&(t=!1),void 0===n&&(n=0),void 0===i&&(i=0),this.addAnimationWithIndex(0,e,t,n,i)},n.prototype.addAnimationWithIndex=function(e,t,n,i,r){void 0===n&&(n=!1),void 0===i&&(i=0),void 0===r&&(r=0);var o=this.state.getCurrent(e).animation;return 0!=r&&this.stateData.setMix(o.name,t,r),this.state.addAnimation(e,t,n,i)},n.prototype.getLatestTrackIndex=function(){for(var e,t=this.state.tracks.length,n=t-1;n>=0&&(!(null===(e=this.state.tracks[n])||void 0===e?void 0:e.animation)||this.state.tracks[n].animation==d.spine.core.AnimationState.emptyAnimation);n--)t=n;return t},n.prototype.setAnimationToEnd=function(e){var t=this.state.getCurrent(e);t.trackTime=t.trackEnd},n.prototype.setNewSkinByName=function(e){var t=this.skeleton;t.setSkin(null),t.setSlotsToSetupPose(),t.setSkinByName(e)},n}(d.spine.Spine);e.Spine=t}(t.PixiAsset||(t.PixiAsset={})),function(e){var t=function(){function e(){}return e.init=function(e){return c(this,void 0,void 0,(function(){var t;return l(this,(function(n){switch(n.label){case 0:return t=Object.keys(e).map((function(t){return new Promise((function(n){return h.sound.add(t,{url:e[t],preload:!0,loaded:function(){return n()}})}))})),[4,Promise.all(t)];case 1:return n.sent(),[2]}}))}))},e.play=function(e,t){return h.sound.exists(e)?h.sound.play(e,t):(console.log("PixiSound play","not exist",'"'+e+'"'),null)},e.muteAll=function(e){e?h.sound.muteAll():h.sound.unmuteAll()},e.pauseByName=function(e){var t=h.sound.find(e);t?t.isPlaying&&!t.paused?t.pause():console.log("PixiSound pauseByName","cannot pause",'"'+e+'"'):console.log("PixiSound pauseByName","not exist",'"'+e+'"')},e.resumeByName=function(e){var t=h.sound.find(e);t?t.paused?t.resume():console.log("PixiSound resumeByName","not paused",'"'+e+'"'):console.log("PixiSound resumeByName","not exist",'"'+e+'"')},e.stopByName=function(e){var t=h.sound.find(e);t?(t.paused&&console.log("PixiSound stopByName.","sound already paused.",'"'+e+'"'),t.stop()):console.log("PixiSound stopByName","not exist",'"'+e+'"')},e.setVolumeByName=function(e,t){var n=h.sound.find(e);n&&(n.volume=t)},e.pauseByInstance=function(e){e&&!e.paused&&(e.paused=!0)},e.resumeByInstance=function(e){e&&e.paused&&(e.paused=!1)},e.stopByInstance=function(e){return null==e||e.stop(),null},e.setVolumeByInstance=function(e,t){e&&(e.volume=t)},e}();e.PixiSound=t}(t.PixiAsset||(t.PixiAsset={})),function(e){e[e.normal=0]="normal",e[e.press=1]="press",e[e.disable=2]="disable"}(v=t.eButtonState||(t.eButtonState={})),function(e){var t=function(t){function n(e){var n=t.call(this)||this;return n.name=e,n}return r(n,t),Object.defineProperty(n.prototype,"ToggleState",{get:function(){return this.currentToggle},enumerable:!1,configurable:!0}),n.prototype.init=function(e){var t=this;return Array.isArray(e)?this.textureInfo={default:Array.from(e)}:this.textureInfo=Object.assign({},e),Object.keys(this.textureInfo).map((function(e){return t.textureInfo[e]=t.textureInfo[e].map((function(e){return/\.(png)$/.test(e)?e:e+".png"}))})),this.currentToggle=Object.keys(this.textureInfo)[0],this.state=v.normal,this.on("pointerdown",this.setTexture.bind(this,v.press)),this.on("pointerup",this.setTexture.bind(this,v.normal)),this.on("pointerupoutside",this.setTexture.bind(this,v.normal)),this.on("setInteractive",(function(e){t.buttonMode=t.interactive=e,t.setTexture(e?v.normal:v.disable)})),this},n.prototype.addTo=function(e,t,n,i){void 0===n&&(n=new d.Point(.5,.5)),void 0===i&&(i=v.normal),this.setParent(e),"number"==typeof t?this.position.set(t):this.position.copyFrom(t),"number"==typeof n?this.anchor.set(n):this.anchor.copyFrom(n),this.setTexture(i),this.setDisable(i==v.disable)},n.prototype.toggle=function(e){var t=this;if(e)this.currentToggle=e;else{if(2!=Object.keys(this.textureInfo).length)return void console.log('Button "'+this.name+'" toggle fail. not 2 state.',this.textureInfo);this.currentToggle=Object.keys(this.textureInfo).find((function(e){return e!=t.currentToggle}))}this.setTexture(v.normal)},n.prototype.setDisable=function(e){this.emit("setInteractive",!e)},n.prototype.setTexture=function(t){this.state=t,this.texture=e.AssetLoader.getTexture(this.textureInfo[this.currentToggle][this.state])},n}(d.Sprite);e.Button=t}(t.PixiAsset||(t.PixiAsset={})),function(e){var t=function(t){function n(e,n){var i=t.call(this,"",n)||this;return i.name=e,i}return r(n,t),n.init=function(t){return c(this,void 0,void 0,(function(){var n;return l(this,(function(i){switch(i.label){case 0:return n=y.font,[4,e.AssetLoader.loadAsset(Object.keys(t).map((function(e){return{name:e,type:n,source:t[e]}})))];case 1:return i.sent(),[2]}}))}))},n.drawFont=function(e,t,i,r,s,a){void 0===r&&(r=0),void 0===s&&(s=.5);var u=new n(e,o(o({},a),{fontName:t,fontSize:i}));return"number"==typeof r?u.position.set(r):u.position.copyFrom(r),"number"==typeof s?u.anchor.set(s):u.anchor.copyFrom(s),u},n.prototype.setTexture=function(e){this.fontName=e},n}(d.BitmapText);e.BitmapText=t}(t.PixiAsset||(t.PixiAsset={}))},37:e=>{e.exports=JSON.parse('{"name":"AssetManager","version":"1.0.0","description":"","scripts":{"fileParse":"node fileParse.js","build:dev":"webpack --config webpack.dev.js","serve":"live-server ./dist","start":"concurrently \'npm:build:dev\' \'npm:serve\'","build":"npm run fileParse && webpack --config webpack.prod.js && node buildFileParse.js"},"keywords":[],"author":"","license":"ISC","devDependencies":{"@types/node":"^15.0.2","clean-webpack-plugin":"^4.0.0-alpha.0","concurrently":"^6.0.2","copy-webpack-plugin":"^8.1.1","copyfiles":"^2.4.1","html-webpack-plugin":"^5.3.1","image-minimizer-webpack-plugin":"^2.2.0","imagemin":"^8.0.0","imagemin-optipng":"^8.0.0","imagemin-webp":"^6.0.0","live-server":"^1.2.1","md5-dir":"^0.2.0","replace-in-file":"^6.2.0","replace-in-file-webpack-plugin":"^1.0.6","ts-loader":"^9.1.1","typescript":"^4.2.4","webpack":"^5.36.2","webpack-cli":"^4.6.0","webpack-merge":"^5.7.3"},"dependencies":{"@pixi/sound":"4.0.2","gsap":"3.6.0","number-precision":"^1.5.0","pixi-spine":"2.1.14","pixi.js-legacy":"5.3.9"}}')},295:e=>{e.exports=window.PIXI},15:e=>{e.exports=window.gsap},799:e=>{e.exports=window.PIXI.sound}},t={};return function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}(134)})()}));
