!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var i in n)("object"==typeof exports?exports:e)[i]=n[i]}}(self,(function(){return(()=>{var e={144:(e,t,n)=>{"use strict";e.exports=n.p+"assets/font/WinNum.fnt"},717:(e,t,n)=>{"use strict";e.exports=n.p+"assets/img/BigWinCoin.json"},461:(e,t,n)=>{"use strict";e.exports=n.p+"assets/img/BigWin_Emitter.json"},140:(e,t,n)=>{"use strict";e.exports=n.p+"assets/img/WinAnim.atlas"},705:(e,t,n)=>{"use strict";e.exports=n.p+"assets/img/WinAnim.json"},485:(e,t,n)=>{"use strict";e.exports=n.p+"assets/img_webp/BigWinCoin.json"},98:(e,t,n)=>{"use strict";e.exports=n.p+"assets/img_webp/BigWinCoin.webp"},862:(e,t,n)=>{"use strict";e.exports=n.p+"assets/img_webp/BigWin_Emitter.json"},232:(e,t,n)=>{"use strict";e.exports=n.p+"assets/img_webp/WinAnim.atlas"},574:(e,t,n)=>{"use strict";e.exports=n.p+"assets/img_webp/WinAnim.json"},273:(e,t,n)=>{"use strict";e.exports=n.p+"assets/img_webp/WinAnim.webp"},57:(e,t,n)=>{var i={"./font/WinNum.fnt":144,"./font/WinNum_0.png":667,"./img/BigWinCoin.json":717,"./img/BigWinCoin.png":136,"./img/BigWin_Emitter.json":461,"./img/WinAnim.atlas":140,"./img/WinAnim.json":705,"./img/WinAnim.png":966,"./img_webp/BigWinCoin.json":485,"./img_webp/BigWinCoin.webp":98,"./img_webp/BigWin_Emitter.json":862,"./img_webp/WinAnim.atlas":232,"./img_webp/WinAnim.json":574,"./img_webp/WinAnim.webp":273};function r(e){var t=s(e);return n(t)}function s(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=s,e.exports=r,r.id=57},766:(e,t,n)=>{const{name:i,version:r}=n(37);e.exports={name:i,version:r,size:{width:720,height:1280},fps:60,canUseWebp:!1,portrait:!0}},667:(e,t,n)=>{"use strict";e.exports=n.p+"assets/font/WinNum_0.png"},136:(e,t,n)=>{"use strict";e.exports=n.p+"assets/img/BigWinCoin.png"},966:(e,t,n)=>{"use strict";e.exports=n.p+"assets/img/WinAnim.png"},412:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{u(i.next(e))}catch(e){s(e)}}function a(e){try{u(i.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}u((i=i.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return o(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return Array.isArray(e)||(e=[e]),[4,Promise.all(e.map((function(e){return Promise.resolve().then((function(){return s(n(57)("./"+e))}))})))];case 1:return[2,t.sent().map((function(e){return e.default}))]}}))}))}},570:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{u(i.next(e))}catch(e){s(e)}}function a(e){try{u(i.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}u((i=i.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BigWinManager=t.eBigWinType=void 0;var c=s(n(295));window.PIXI=c;var l=u(n(15));window.gsap=l.default;var p,f,h=u(n(766)),g=u(n(412)),d=u(n(550)),m=h.default.name,b=h.default.version,w=PixiAsset.Container,v=PixiAsset.Graphics,y=PixiAsset.JSON,W=PixiAsset.AssetLoader,x=PixiAsset.BitmapText,_=PixiAsset.AnimatedSprite,j=PixiAsset.ParticleEmitter,P=PixiAsset.Spine;!function(e){e.font="WinNum",e.coin="coin",e.emitter="emitter",e.spine="BigWinSpine"}(p||(p={})),function(e){e[e.light=0]="light",e[e.particle=1]="particle",e[e.cont=2]="cont"}(f||(f={}));var B,A=["inBigWin","inMegaWin","inHugeWin","inSuperWin"];!function(e){e[e.none=0]="none",e[e.bigWin=1]="bigWin",e[e.megaWin=2]="megaWin",e[e.hugeWin=3]="hugeWin",e[e.superWin=4]="superWin"}(B=t.eBigWinType||(t.eBigWinType={}));var C=function(){function e(){}return e.init=function(e,t,n,i){return o(this,void 0,void 0,(function(){var r,s,o,u,c,l,f=this;return a(this,(function(a){switch(a.label){case 0:return console.log("%c"+m+" 版號: "+b,"color:#E6A23C; background-color:#909399; font-size:16px; padding:0 5px; font-family: 600 Ariel"),this.config=t,this.winInterval=n.slice(),4!=this.winInterval.length?(Debug.error("BigWinManager init: 間隔不正確",this.winInterval),[2]):(r=this,[4,y.getJson(d.default.toString())]);case 1:return r.setting=a.sent(),[4,W.init(e)];case 2:return a.sent(),[4,g.default(["font/WinNum.fnt","img/BigWinCoin.json","img/BigWin_Emitter.json","img/WinAnim.json"].map((function(e){return f.config.canUseWebp?pathConvert(e):e})))];case 3:return s=a.sent().slice(0),[4,x.init((o={},o[p.font]=s[0],o))];case 4:return a.sent(),[4,_.init((u={},u[p.coin]={name:p.coin,source:s[1],animName:"BigWinCoin"},u))];case 5:return a.sent(),[4,j.init(t.fps,(c={},c[p.emitter]=s[2],c))];case 6:return a.sent(),[4,P.init((l={},l[p.spine]=s[3],l))];case 7:return a.sent(),this.isPlaying=!1,this.stopTrigger=i,[2]}}))}))},e.playBigWin=function(e,t,n){return o(this,void 0,void 0,(function(){var i,r,s,o,u,h;return a(this,(function(a){switch(a.label){case 0:return this.totalBet=t,this.winType=this.getBigWinType(n),this.winType==B.none?[2]:(i=this.stopTrigger,r=i.level,s=i.function,this.winType>=r&&s(),this.isPlaying?(Debug.warn("playBigWin while it's playing."),[2]):(this.isPlaying=!0,this.parent=e.addChild(new v("black").drawColorRect(0,this.setting.blackAlpha,new c.Point(-640,-640),1280,1280)),this.parent.interactive=!0,o=P.playSpine(p.spine,"Light",!0)[0],u=j.playAnimatedParticle(this.parent,p.emitter,p.coin,{framerate:20}),this.bigWinCont=this.parent.addChild(new w("BigWinCont",f.cont)),this.word=P.playSpine(p.spine,A[0])[0],this.word.y-=100,h=this.playScrolling(n),this.parent.addChild(o),this.bigWinCont.addChild(this.word),o.zIndex=f.light,u.parent.zIndex=f.particle,this.parent.sortChildren(),(this.resizeFn=EventHandler.on(eEventName.orientationChange,this.resize.bind(this)))(),[4,h]));case 1:return a.sent(),[4,Sleep(this.setting.endDelay)];case 2:return a.sent(),[4,waitTweenComplete(l.default.to(this.parent,{duration:this.setting.fadeoutDur,alpha:0}))];case 3:return a.sent(),this.endBigWin(),[2]}}))}))},e.playScrolling=function(e){return o(this,void 0,void 0,(function(){var t,n,i,r,s,o,u,f,h,g,d=this;return a(this,(function(a){switch(a.label){case 0:return this.number=x.drawFont("bigWinNumber",p.font,19,new c.Point(0,30)),this.number.setParent(this.bigWinCont),t=this.getDuration(),n=t[0],i=t[1],r=t[2],s=t[3],o={value:0},u=this.winInterval.map((function(e){return d.totalBet*e})),f=n,h=e>u[1]?u[1]:e,g=l.default.timeline({defaults:{ease:Power0.easeNone}}).to(o,{duration:f,value:h}),this.winType>=B.megaWin&&(g.call((function(){var e=A[1];d.word.setAnimation(e)})),e!=u[1]&&(f=i,h=e>u[2]?u[2]:e,g.to(o,{duration:f,value:h}))),this.winType>=B.hugeWin&&(g.call((function(){var e=A[2];d.word.setAnimation(e)})),e!=u[2]&&(f=r,h=e>u[3]?u[3]:e,g.to(o,{duration:f,value:h}))),this.winType>=B.superWin&&(g.call((function(){var e=A[3];d.word.setAnimation(e)})),e!=u[3]&&(f=s,h=e,g.to(o,{duration:f,value:h}))),g.eventCallback("onStart",(function(){d.parent.on("pointerdown",(function(){return g.isActive()&&g.progress(1,!1)}))})),g.eventCallback("onUpdate",(function(){d.number.text=MathTool.convertNumDisplay(o.value)})),[4,waitTweenComplete(g)];case 1:return a.sent(),this.parent.removeAllListeners(),[2]}}))}))},e.endBigWin=function(){EventHandler.off(eEventName.orientationChange,this.resizeFn),this.parent.destroy(),this.isPlaying=!1,this.winType=B.none},e.getBigWinType=function(e){var t=e/this.totalBet;return t<this.winInterval[0]?B.none:t<this.winInterval[1]?B.bigWin:t<this.winInterval[2]?B.megaWin:t<this.winInterval[3]?B.hugeWin:B.superWin},e.getDuration=function(){return this.setting.durationInterval.slice(0,this.winType)},e.resize=function(){var e=this.config,t=e.portrait,n=e.size,i=n.width,r=n.height;t?(this.parent.position.set(i/2,r/2),this.bigWinCont.scale.set(.65)):(this.parent.position.set(r/2,i/2),this.bigWinCont.scale.set(1))},e}();t.BigWinManager=C},37:e=>{"use strict";e.exports=JSON.parse('{"name":"BigWinManager","version":"1.0.0","description":"","scripts":{"fileParse":"node fileParse.js","build:dev":"npm run fileParse && webpack --config webpack.dev.js","serve":"live-server ./dist","start":"concurrently \'npm:build:dev\' \'npm:serve\'","build":"npm run fileParse && webpack --config webpack.prod.js --progress && node buildFileParse.js"},"keywords":[],"author":"","license":"ISC","devDependencies":{"@types/node":"^15.0.2","clean-webpack-plugin":"^4.0.0-alpha.0","concurrently":"^6.0.2","copy-webpack-plugin":"^8.1.1","copyfiles":"^2.4.1","html-webpack-plugin":"^5.3.1","image-minimizer-webpack-plugin":"^2.2.0","imagemin":"^8.0.0","imagemin-pngquant":"^9.0.2","imagemin-webp":"^6.0.0","live-server":"^1.2.1","md5-dir":"^0.2.0","replace-in-file":"^6.2.0","replace-in-file-webpack-plugin":"^1.0.6","ts-loader":"^9.1.1","typescript":"^4.2.4","webpack":"^5.36.2","webpack-cli":"^4.6.0","webpack-merge":"^5.7.3"},"dependencies":{"@pixi/sound":"4.0.2","gsap":"3.6.0","number-precision":"^1.5.0","pixi-particles":"4.3.0","pixi-spine":"2.1.14","pixi.js-legacy":"5.3.9"}}')},550:(e,t,n)=>{"use strict";e.exports=n.p+"setting.json"},295:e=>{"use strict";e.exports=window.PIXI},15:e=>{"use strict";e.exports=window.gsap}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i].call(s.exports,s,s.exports,n),s.exports}return n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n(570)})()}));